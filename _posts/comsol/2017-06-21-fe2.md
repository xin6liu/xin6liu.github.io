---
layout: simple
title: docker
date: 2017-06-21
category: comsol
---

docker就像往集装箱里装货物的**码头工人**那样，它把**应用**打包成具有某种标准规格的**集装箱**，用计算机领域的语言来说，这种按照一定规格封装的集装箱叫**「镜像」**。其实就是**将你原来的代码添加点额外的内容，格式之类的，生产出来的一个符合某种标准的东西。**

镜像：原画像复制品。
在docker中镜像是指，把你的应用按照一定的格式封装（其实就是执行一些符合特定规的命令行）成一种具有某种标准规格的东西（就像集装箱把你的货物封装起来类似）。形象的说，就是把你的应用按照一定的格式抽象的画了个画像。

在docker中，镜像是无法直接运行的，这并不是技术上的原因，而是出于工程设计上的考虑。因为一般来说，一个软件的**某个具体版本**只会打包成一个镜像。如果镜像可以配置，运行的话，在使用过程中很可能会对镜像造成破坏。

那怎么样避免镜像损坏的问题呢？就是再加一层，相当于分身术，只要本尊没问题，分身怎么扑街都不会真正的跪掉。多加的这一层分身，就叫**容器（container）**，这个名字也挺形象，它就像个盒子一样，你的应用在里面运行，而且多了一层安全机制。你想使用服务或把你的应用跑起来的话，只需要**使用镜像新创建一个容器**就可以了（也是一条命令搞定），而镜像还放在那里不动，没办法，金贵嘛。

**重点：**docker究竟做了什么？
docker在部署过程中，将**安装，配置等重复的部分**，由docker**自动化**完成。只需要在**第一次部署**时，**构建完可用的docker镜像**（装好集装箱），在以后使用中，短短的几行命令，就可以直接拉取镜像，根据这个镜像创建出一个容器，把服务跑起来了。所需要的仅仅是安装了docker的服务器，一个Dockerfile文件，以及比较流畅的网络而已。真可谓『一次构建，到处部署』。

* 需要python3环境？直接 from python:3.x 搞定。
* 需要迁移服务器？ 直接把应用连带Dockerfile，备份数据拷贝到新服务器上，几条命令又搞定
* 需要作为服务给别人使用？Dockerfile即是最清晰的部署文档，维护一个官方镜像即可，谁需要就直接拉下来几条命令部署上就行了。

到这里你可能已经发现了，docker镜像成为了一种像集装箱那样的标准货件。它不像传统的软件交付方式那样，只把代码以及说明文档之类的给你就完了，而是直接给你一个标准docker货件，它可能是Dockerfile，或者直接就是镜像，这个标准件不仅包括了代码本身，还包括了代码运行的OS等各种整体环境。

于是，谁想用我的服务，直接拉取镜像，实例化一个容器就可以了，能直接提供你所要的服务，不再像之前那样有繁复的安装过程————这些都有人给你做过了。
